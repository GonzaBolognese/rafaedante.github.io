<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <script>

        //alert('esto es un proceso sincronico') // BLOQUEANTE

        /* console.log('Primer console.log')
        setTimeout(function() {
            console.log('Hola mundo al cabo de 3 segundos')
        }, 3000)
        console.log('Tercer console.log') */

        // Una promesa es una OPERACION ASINCRONICA QUE PUEDE SER RESUELTA O RECHAZADA

        // Tarea #1: Crear la promesa: definir cuando esta resuelta o rechazada
        const promesa = new Promise(function(resolver, rechazar) {
            let temperatura = 23.5
            if(temperatura < 10) {
                // Todo OK
                resolver('TODO OK')
            } else {
                // ERROR
                rechazar('Error en promesa')
            }
        })

        // Tarea #2: Usar la promesa: definir que sucede cuando esta resuelta o cuando esta
        // rechazada.

      /*   promesa
         .then(function(mensaje) {
             document.write(mensaje)
         })
         .catch(function(error) {
             console.log(error)
         }) */

         /*
            Async - await
            1) Ejecuta la promesa
            2) Espera (await) a que la promesa se resuelva
            3) Cuando la promesa se resuelve, await devuelve el argumento
            de la funcion resolver
         */
        
         async function mifuncion() {
             try {
                const mensaje =  await promesa
                console.log(mensaje)
             }
             catch(error) {
                 console.log("Error!!!!:", error)
             }            
         }
         
         //mifuncion()

         /*
            API Fetch

            En que ambito esta disponible?

            - window (Browser)
            - ServiceWorker (Worker)

            Que nos ofrece?

            - Funciones: fetch()
            - Eventos: FetchEvent
            - Objetos: Request y Response         
         */

         /* let peticionesHttp = new Request('https://jsonplaceholder.typicode.com/users')
         console.log(peticionesHttp) */

         (async function() {
             const respuesta = await fetch('https://jsonplaceholder.typicode.com/users')
             const datos = await respuesta.json()

             console.log(datos)
         })()
    
    </script>
    
</body>
</html>